{"version":3,"sources":["Map.js","Grid.js","Graph.js","components/Title.js","Drawer.js","components/Login/Login.js","components/Register/create.js","components/Logout.js","App.js","Home.js","serviceWorker.js","index.js"],"names":["style","width","height","window","geojsonLayer","lfMap","map","legend","L","control","position","onAdd","div","DomUtil","create","innerHTML","MapData","props","state","data","renderLegend","kftoken","toposkaermkortwmts","tileLayer","wms","layers","token","format","attribution","kommuneWms","transparent","minZoom","center","zoom","scale","addTo","undefined","removeLayer","geoJSON","onEachFeature","feature","layer","bindPopup","properties","status","navn","pointToLayer","latlng","marker","icon","iconUrl","imgUrl","selector","shadowUrl","iconAnchor","shadowAnchor","popupAnchor","centerCoords","features","filter","includes","length","geometry","coordinates","getCenterPoint","setView","fitBounds","getBounds","this","renderMap","renderFeatures","console","log","id","React","Component","StatusFormatter","value","color","StatusTypeProvider","formatterComponent","PnummerFormatter","link","href","target","rel","PnummerProvider","getRowId","row","GridData","rows","sorting","columnName","direction","statusColumns","pcols","grouping","changeSorting","setState","changeGrouping","updateData","total","totalRendered","pc","index","s","replace","Paper","textAlign","columns","name","title","defaultFilters","defaultSorting","for","defaultColumnWidths","showSortingControls","filteredRows","PureComponent","GraphData","clicked","fill","catData","dat","tilfl","x","y","getSummaryData","margin","theme","VictoryTheme","material","domainPadding","barWidth","dataComponent","events","onMouseOver","fillColor","d","datum","labels","Title","Typography","variant","useStyles","makeStyles","list","fullList","nested","paddingLeft","TemporaryDrawer","classes","handleDrawer","filterCols","handleCheckedFilters","reset","doFilter","filterWords","useState","postdistrikt","postnummer","opened","setOpened","Drawer","anchor","open","drawerOpen","onClose","categories","cols","comps","forEach","categorie","key","col","ListItem","button","className","ListItemText","primary","Object","keys","ListItemSecondaryAction","Checkbox","checked","values","onChange","e","edge","_list","role","List","ListItemIcon","Button","size","onClick","dense","text","Fragment","handleClick","Collapse","in","timeout","unmountOnExit","component","disablePadding","sideList","root","flexGrow","container","display","flexWrap","textField","marginLeft","spacing","marginRight","LoginComponent","loginData","handleInputChange","handleLoginDatachange","errorMessage","Grid","item","xs","InputLabel","TextField","label","placeholder","InputLabelProps","shrink","user","error","helperText","type","password","Alert","elevation","CreateUserDialog","email","organisation","password2","consent","btnDisabled","userInfo","setUserInfo","displayError","event","handleDialogClose","handleCreateDialogClose","Dialog","isRegisterFormShown","aria-labelledby","DialogTitle","DialogContent","DialogContentText","severity","autoFocus","fullWidth","FormControlLabel","FormHelperText","DialogActions","justifyContent","disabled","handleRegister","StyledMenu","withStyles","paper","border","Menu","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","StyledMenuItem","backgroundColor","palette","main","common","white","MenuItem","Logout","anchorEl","setAnchorEl","IconButton","aria-controls","aria-haspopup","currentTarget","keepMounted","Boolean","handleLogout","moment","locale","ExcelFile","ReactExport","ExcelSheet","ExcelColumn","createMuiTheme","typography","useNextVariants","suppressDeprecationWarnings","uniqueValuesGroupedByKey","arrOfObj","ret","uniqueElemsOfSameKey","_arrOfObj","colValues","elem","Set","TabContainer","children","App","startDate","subtract","startOf","endDate","endOf","kommuner","komkode","komnr","csvData","loading","completed","canSendRequest","filterOpen","alertOpen","alertMessage","uniqueVals","dataToRender","isLoginShown","sessionId","sessionStorage","getItem","registrationErrorMessage","loginErrorMessage","handleChange","bind","handleStart","handleEnd","handleSelect","handleDoneClick","handleFilterOpen","handleFilterClose","handleDrawerOpen","updateRenderDataFromTable","onAlertClose","handleCreateDialogOpen","handleLogin","filteredCategories","filters","cat","temp","obj","res","indexOf","message","split","group","checkedGroup","indexToUpdate","findIndex","elementToUpdate","slice","that","jQuery","get","success","removeItem","ajax","url","dataType","koms","preveState","_loginData","database","setItem","session_id","fail","userObj","subuser","usergroup","parentdb","org","post","JSON","stringify","responseJSON","getErrorMessage","errorCode","postData","startdate","enddate","jsonData","csv","form","virksomhedsform","getVirkForm","_startdato","startdato","substring","prevState","persist","getData","getKommuner","navigate","date","AppBar","Toolbar","Login","Link","underline","classnames","noValidate","autoComplete","select","SelectProps","native","kom","komnavn","utils","MomentUtils","DatePicker","arial-label","Tooltip","element","filename","Tabs","centered","Tab","aria-label","Graph","marginTop","menu","progress","source","createHashSource","history","createHistory","Home","path","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.668a3de0.chunk.js","sourcesContent":["import React from \"react\";\r\nimport L from \"leaflet\";\r\n//import axios from \"axios\";\r\n\r\nconst style = {\r\n  width: \"100%\",\r\n  height: \"1200px\"\r\n};\r\n\r\nvar geojsonLayer;\r\nvar map;\r\nwindow.geojsonLayer = geojsonLayer;\r\nwindow.lfMap = map;\r\n\r\nvar legend = L.control({ position: \"bottomleft\" });\r\nlegend.onAdd = function(map) {\r\n  var div = L.DomUtil.create(\"div\", \"legend\");\r\n  div.innerHTML += \"<h4>Signaturforklaring</h4>\";\r\n  div.innerHTML +=\r\n    '<i style=\"background:#0020d7\"></i><span>NyStartet</span><br>';\r\n  div.innerHTML +=\r\n    '<i style=\"background:#d79700\"></i><span>Fraflyttet</span><br>';\r\n  div.innerHTML +=\r\n    '<i style=\"background:#298b30\"></i><span>Tilflyttet</span><br>';\r\n  div.innerHTML +=\r\n    '<i style=\"background:#c10a0a\"></i><span>Ophørt</span><br>';\r\n  return div;\r\n};\r\n\r\nclass MapData extends React.Component {\r\n  constructor(props) {\r\n    super(props); // console.log(props.data);\r\n    this.state = {\r\n      data: {},\r\n      renderLegend: false\r\n    };\r\n  }\r\n\r\n  renderMap(data) {\r\n    var myAttributionText =\r\n      '&copy; <a target=\"_blank\" href=\"https://download.kortforsyningen.dk/content/vilk%C3%A5r-og-betingelser\">Styrelsen for Dataforsyning og Effektivisering</a>';\r\n    var kftoken = \"d12107f70a3ee93153f313c7c502169a\";\r\n    var toposkaermkortwmts = L.tileLayer.wms(\r\n      \"https://services.kortforsyningen.dk/topo_skaermkort\",\r\n      {\r\n        layers: \"dtk_skaermkort_daempet\",\r\n        token: kftoken,\r\n        format: \"image/png\",\r\n        attribution: myAttributionText\r\n      }\r\n    );\r\n\r\n    var kommuneWms = L.tileLayer.wms(\r\n      \"https://services.kortforsyningen.dk/service?request=GetCapabilities&servicename=dagi\"\r\n       +\"&service=WMS&version=1.1.1\",\r\n       {\r\n         layers:\"kommune\",\r\n         format:\"image/png\",\r\n         token: kftoken,\r\n         transparent:true,\r\n         minZoom: 11\r\n\r\n       }\r\n    );\r\n    window.lfMap = L.map(\"map\", {\r\n      center: [55.876823, 9.961644],//[55.2, 12.2],\r\n      zoom: 8,\r\n      layers: [\r\n        toposkaermkortwmts,\r\n        kommuneWms,\r\n      ]\r\n    });\r\n\r\n    // var legend = L.control({ position: \"bottomleft\" });\r\n    // legend.onAdd = function(map) {\r\n    //   var div = L.DomUtil.create(\"div\", \"legend\");\r\n    //   div.innerHTML += \"<h4>Signaturforklaring</h4>\";\r\n    //   div.innerHTML +=\r\n    //     '<i style=\"background:#0020d7\"></i><span>NyStartet</span><br>';\r\n    //   div.innerHTML +=\r\n    //     '<i style=\"background:#d79700\"></i><span>Fraflyttet</span><br>';\r\n    //   div.innerHTML +=\r\n    //     '<i style=\"background:#298b30\"></i><span>Tilflyttet</span><br>';\r\n    //   div.innerHTML +=\r\n    //     '<i style=\"background:#c10a0a\"></i><span>Ophørt</span><br>';\r\n    //   return div;\r\n    // };\r\n    // if(this.state.renderLegend){\r\n    //   legend.addTo(map);\r\n    // }\r\n\r\n     L.control.scale().addTo(window.lfMap);\r\n  }\r\n  renderFeatures(data) {\r\n   legend.addTo(window.lfMap);\r\n    var costumIcon = function(status) {\r\n      function selector(status) {\r\n        const imgUrl = \"https://raw.githubusercontent.com/magloire/cvrflytny/master/public/\";\r\n        switch (status) {\r\n          case \"Tilflytter\":\r\n            \r\n            return imgUrl + \"img/t.png\";\r\n          case \"Fraflytter\":\r\n            return imgUrl + \"img/f.png\";\r\n          case \"Nystartet\":\r\n            return imgUrl + \"img/n.png\";\r\n          case \"Ophørt\":\r\n            return imgUrl + \"img/o.png\";\r\n          default:\r\n            break;\r\n        }\r\n      }\r\n      return L.icon({\r\n        iconUrl: selector(status),\r\n        shadowUrl: \"img/shadow.png\",\r\n        iconAnchor: [16, 37],\r\n        shadowAnchor: [20, 35],\r\n        popupAnchor: [0, -30]\r\n      });\r\n    };\r\n\r\n    if (\r\n      window.geojsonLayer !== undefined) {\r\n      window.lfMap.removeLayer(\r\n        window.geojsonLayer);\r\n    }\r\n\r\n    function getCenterPoint(data) {\r\n      let features = data.filter(feature =>\r\n        [\"Nystartet\", \"\"].includes(feature.properties.status)\r\n      );\r\n      if (features.length === 0) return null;\r\n      return features[0].geometry.coordinates;\r\n    }\r\n    function onEachFeature(feature, layer) {\r\n      layer.bindPopup(\r\n        \"<strong>\" +\r\n          feature.properties.status +\r\n          \"</strong></br><hr>\" +\r\n          feature.properties.navn +\r\n          '</br><a href=\"https://datacvr.virk.dk/data/visenhed?enhedstype=produktionsenhed&id=' +\r\n          feature.properties[\"p-nummer\"] +\r\n          '\" target=\"_blank\">Se mere her</a>'\r\n      );\r\n    }\r\n\r\n    window.geojsonLayer = L.geoJSON(data, {\r\n      onEachFeature: onEachFeature,\r\n      pointToLayer: function(feature, latlng) {\r\n        //return L.circleMarker(latlng, geojsonMarkerOptions);\r\n        return L.marker(latlng, {\r\n          icon: costumIcon(feature.properties.status)\r\n        });\r\n      }\r\n    }).addTo(window.lfMap);\r\n\r\n    let centerCoords = getCenterPoint(data);\r\n    if (centerCoords) window.lfMap.setView([centerCoords[1], centerCoords[0]], 12);\r\n    else window.lfMap.fitBounds(\r\n      window.geojsonLayer.getBounds());\r\n  }\r\n  componentDidMount() {\r\n    this.renderMap(this.props.data);\r\n    if (this.props.data.length > 0) {\r\n      this.renderFeatures(this.props.data);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    console.log(\"componentdidupdate\");\r\n    //const { data } = this.props;\r\n    //this.renderFeatures(data);\r\n    if (this.props.data.length > 0) {\r\n      this.renderFeatures(this.props.data);\r\n    } else {\r\n      console.log(\"props empty\");\r\n    }\r\n  }\r\n\r\n  renderMarkers(data) {\r\n    //select marker depending on status\r\n    //let mymap = this.map;\r\n    var costumIcon = function(status) {\r\n      function selector(status) {\r\n        switch (status) {\r\n          case \"Tilflytter\":\r\n            return \"img/t.png\";\r\n          case \"Fraflytter\":\r\n            return \"img/f.png\";\r\n          case \"Nystartet\":\r\n            return \"img/n.png\";\r\n          case \"Ophørt\":\r\n            return \"img/o.png\";\r\n          default:\r\n            break;\r\n        }\r\n      }\r\n      return L.icon({\r\n        iconUrl: selector(status),\r\n        shadowUrl: \"img/shadow.png\",\r\n        iconAnchor: [16, 37],\r\n        shadowAnchor: [20, 35],\r\n        popupAnchor: [0, -30]\r\n      });\r\n    };\r\n    //check if there is markers on the map and remove\r\n    if (window.geojsonLayer !== undefined) {\r\n      window.lfMap.removeLayer(\r\n        window.geojsonLayer);\r\n    }\r\n\r\n    function onEachFeature(feature, layer) {\r\n      console.log(\"called for each feature\");\r\n      layer.bindPopup(\r\n        \"<strong>\" +\r\n          feature.properties.status +\r\n          \"</strong></br><hr>\" +\r\n          feature.properties.navn +\r\n          '</br><a href=\"https://datacvr.virk.dk/data/visenhed?enhedstype=produktionsenhed&id=' +\r\n          feature.properties[\"p-nummer\"] +\r\n          '\" target=\"_blank\">Se mere her</a>'\r\n      );\r\n    }\r\n\r\n    \r\nwindow.geojsonLayer = L.geoJSON(data, {\r\n      onEachFeature: onEachFeature,\r\n      pointToLayer: function(feature, latlng) {\r\n        return L.marker(latlng, {\r\n          icon: costumIcon(feature.properties.status)\r\n        });\r\n      }\r\n    }).addTo(window.lfMap);\r\n\r\n    // console.log(geojsonLayer.getBounds());\r\n    // map.fitBounds(geojsonLayer.getBounds());\r\n  }\r\n\r\n  render() {\r\n    return <div id=\"map\" style={style}></div>;\r\n  }\r\n}\r\n\r\nexport default MapData;\r\n","import React from \"react\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport {\r\n  Template,\r\n  TemplatePlaceholder,\r\n  TemplateConnector,\r\n} from \"@devexpress/dx-react-core\";\r\n\r\nimport {\r\n  SortingState,\r\n  IntegratedSorting,\r\n  FilteringState,\r\n  IntegratedFiltering,\r\n  DataTypeProvider\r\n} from \"@devexpress/dx-react-grid\";\r\n\r\nimport {\r\n  Grid,\r\n  VirtualTable,\r\n  TableHeaderRow,\r\n  TableFilterRow,\r\n  TableColumnResizing\r\n} from \"@devexpress/dx-react-grid-material-ui\";\r\n\r\nconst getColor = status => {\r\n  if (status === \"Fraflytter\") return \"orange\";\r\n  else if (status === \"Tilflytter\") return \"green\";\r\n  else if (status === \"Nystartet\") return \"blue\";\r\n  else if (status === \"Ophørt\") return \"red\";\r\n  else return \"blue\";\r\n};\r\n\r\nconst StatusFormatter = ({ value }) => {\r\n  let color = getColor(value);\r\n  return <b style={{ color: color }}>{value}</b>;\r\n};\r\n\r\nconst StatusTypeProvider = props => (\r\n  <DataTypeProvider formatterComponent={StatusFormatter} {...props} />\r\n);\r\n\r\nconst PnummerFormatter = ({ value }) => {\r\n  let link = `https://datacvr.virk.dk/data/visenhed?enhedstype=produktionsenhed&id=${value}`;\r\n  return (\r\n    <a href={link} target=\"_blank\" rel=\"noopener noreferrer\">\r\n      {value}\r\n    </a>\r\n  );\r\n};\r\n\r\nconst PnummerProvider = props => (\r\n  <DataTypeProvider formatterComponent={PnummerFormatter} {...props} />\r\n);\r\n\r\n\r\nconst getRowId = row => {\r\n  return row[\"keyIndex\"];\r\n};\r\n\r\nclass GridData extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      rows: [],\r\n      data: [],\r\n      sorting: [{ columnName: \"hovedbranche\", direction: \"desc\" }],\r\n      statusColumns: [\"status\"],\r\n      pcols: [\"p-nummer\"],\r\n      grouping: [{ columnName: \"status\" }]\r\n    };\r\n    this.changeSorting = sorting => this.setState({ sorting });\r\n    this.changeGrouping = grouping => this.setState({ grouping });\r\n  }\r\n\r\n  componentDidMount() {}\r\n\r\n  componentDidUpdate() {}\r\n\r\n  render() {\r\n    const updateData = this.props.updateData;\r\n    const total = this.props.total;\r\n    const totalRendered = this.props.totalRendered;\r\n    const cols = [\r\n      { name: \"status\", title: \"Status\" },\r\n      { name: \"cvr-nummer\", title: \"CVR nummer\" },\r\n      { name: \"p-nummer\", title: \"P nummer\" },\r\n      { name: \"hovedbranche\", title: \"Branche\" },\r\n      { name: \"virksomhedsform\", title: \"virksomhedsform\" },\r\n      { name: \"navn\", title: \"Virksomhedsnavn\" },\r\n      { name: \"fuldt ansvarlige deltagere\", title: \"Kontaktperson\" },\r\n      { name: \"maanedsbeskaeftigelse_antalansatteinterval\", title: \"Antal ansatte\" },\r\n      { name: \"kommunekode\", title: \"Kommunekode\" },\r\n      { name: \"vejnavn\", title: \"Vejnavn\" },\r\n      { name: \"husnummer\", title: \"Husnummer\" },\r\n      { name: \"postnummer\", title: \"Postnummer\" },\r\n      { name: \"postdistrikt\", title: \"By\" },\r\n      { name: \"emailadresse\", title: \"Email\" },\r\n      { name: \"startdato\", title: \"Startdato cvr\" },\r\n      { name: \"indlæst dato\", title: \"Indlæst dato\" }\r\n    ];\r\n\r\n    const defaultColumnWidths = [\r\n      { columnName: \"status\", width: 100 },\r\n      { columnName: \"cvr-nummer\", width: 100 },\r\n      { columnName: \"p-nummer\", width: 100 },\r\n      { columnName: \"hovedbranche\", width: 150 },\r\n      { columnName: \"virksomhedsform\", width: 150 },\r\n      { columnName: \"navn\", width: 150 },\r\n      { columnName: \"fuldt ansvarlige deltagere\", width: 120 },\r\n      { columnName: \"maanedsbeskaeftigelse_antalansatteinterval\", width: 120 },\r\n      { columnName: \"kommunekode\", width: 120 },\r\n      { columnName: \"vejnavn\", width: 120 },\r\n      { columnName: \"husnummer\", width: 120 },\r\n      { columnName: \"postnummer\", width: 120 },\r\n      { columnName: \"postdistrikt\", width: 120 },\r\n      { columnName: \"emailadresse\", width: 120 },\r\n      { columnName: \"startdato\", width: 120 },\r\n      { columnName: \"indlæst dato\", width: 120 }\r\n    ];\r\n\r\n    const { statusColumns } = this.state;\r\n    const pc = this.state.pcols;\r\n    const rows = this.props.data.map((feature, index) => {\r\n      feature.properties[\"keyIndex\"] = index;\r\n      let s = feature.properties['fuldt ansvarlige deltagere'];\r\n      if(s !== null && s.length > 0)\r\n        feature.properties['fuldt ansvarlige deltagere'] = s.replace(/\"/g,'');\r\n      if(s === \"NULL\")\r\n        feature.properties['fuldt ansvarlige deltagere'] = \"\";\r\n      return feature.properties;\r\n    });\r\n\r\n    // console.log(rows);\r\n    return (\r\n      <Paper\r\n        style={{\r\n          height: \"100%\"\r\n        }}\r\n      >\r\n  <h6 style={{textAlign:\"center\"}}>{`${totalRendered} ud af ${total}`}</h6>\r\n        <Grid\r\n          rows={rows}\r\n          columns={cols}\r\n          getRowId={getRowId}\r\n          style={{\r\n            height: \"100%\"\r\n          }}\r\n        >\r\n          <FilteringState defaultFilters={[]} />\r\n          <IntegratedFiltering />\r\n          <SortingState\r\n            defaultSorting={[{ columnName: \"status\", direction: \"desc\" }]}\r\n          />\r\n          <IntegratedSorting />\r\n          <StatusTypeProvider for={statusColumns} />\r\n          <PnummerProvider for={pc} />\r\n          <VirtualTable height={600} />\r\n          <TableColumnResizing defaultColumnWidths={defaultColumnWidths} />\r\n          <TableHeaderRow showSortingControls />\r\n          <TableFilterRow />\r\n          <Template name=\"root\">  \r\n            <TemplateConnector>  \r\n              {({ rows: filteredRows }) => { \r\n                console.log(\"filteredRows\"); \r\n                console.log(filteredRows);\r\n                updateData(filteredRows);  \r\n                return <TemplatePlaceholder />;  \r\n              }}  \r\n            </TemplateConnector>  \r\n          </Template>\r\n        </Grid>\r\n      </Paper>\r\n    );\r\n  }\r\n}\r\n/*\r\n\r\n                <FilteringState defaultFilters={[]} />\r\n                <IntegratedFiltering />\r\n                <SortingState defaultSorting={[{ columnName: 'status', direction: 'desc' }]} />\r\n                <IntegratedSorting />\r\n                <StatusTypeProvider \r\n                    for={statusColumns}\r\n                />\r\n                <VirtualTable\r\n                    height=\"auto\"\r\n                />\r\n                <TableColumnResizing defaultColumnWidths={defaultColumnWidths} />\r\n                <TableHeaderRow showSortingControls />\r\n                <TableFilterRow />\r\n\r\n*/\r\nexport default GridData;\r\n","import React from \"react\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport { VictoryBar, VictoryChart, Bar, VictoryTheme } from \"victory\";\r\n\r\nconst getSummaryData = dat => {\r\n  let data = dat.map(feature => feature.properties);\r\n  let tilfl = data.filter(x => {\r\n    return x.status === \"Tilflytter\";\r\n  }).length;\r\n  let frafl = data.filter(x => x.status === \"Fraflytter\").length;\r\n  let oph = data.filter(x => x.status === \"Ophørt\").length;\r\n  let ny = data.filter(x => x.status === \"Nystartet\").length;\r\n  return [\r\n    { x: \"Fraflytter\", y: frafl },\r\n    { x: \"Tilflytter\", y: tilfl },\r\n    { x: \"Ophørt\", y: oph },\r\n    { x: \"Nystartet\", y: ny }\r\n  ];\r\n};\r\n\r\nclass GraphData extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      clicked: false,\r\n      style: {\r\n        data: { fill: \"tomato\" }\r\n      }\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const handleMouseOver = () => {\r\n      const fillColor = this.state.clicked ? \"blue\" : \"tomato\";\r\n      const clicked = !this.state.clicked;\r\n      this.setState({\r\n        clicked,\r\n        style: {\r\n          data: { fill: fillColor }\r\n        }\r\n      });\r\n    };\r\n\r\n    let catData = getSummaryData(this.props.data);\r\n\r\n    return (\r\n      <div>\r\n        <Paper style={{ height: 800, width:800, margin:'auto' }}>\r\n\r\n          <VictoryChart\r\n            height={200}\r\n            width={300}\r\n            theme={VictoryTheme.material}\r\n            domainPadding={15}\r\n          >\r\n            <VictoryBar\r\n              barWidth={8}\r\n              dataComponent={<Bar events={{ onMouseOver: handleMouseOver }} />}\r\n              style={{\r\n                data: {\r\n                  fill: d => {\r\n                    if (d.datum.x === \"Fraflytter\") return \"orange\";\r\n                    if (d.datum.x === \"Tilflytter\") return \"green\";\r\n                    if (d.datum.x === \"Ophørt\") return \"red\";\r\n                    if (d.datum.x === \"Nystartet\") return \"blue\";\r\n                  }\r\n                }\r\n              }}\r\n              data={catData}\r\n              labels={d => d.datum.y}\r\n            />\r\n          </VictoryChart>\r\n        </Paper>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default GraphData;\r\n","import React from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nexport default function Title(){\r\n    return (\r\n        <Typography variant=\"h6\" color=\"inherit\">\r\n            CVR Flyttemønster\r\n        </Typography>\r\n    );\r\n}","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\r\nimport Collapse from \"@material-ui/core/Collapse\";\r\nimport ExpandLess from \"@material-ui/icons/ExpandLess\";\r\nimport ExpandMore from \"@material-ui/icons/ExpandMore\";\r\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nconst useStyles = makeStyles({\r\n  list: {\r\n    width: 450\r\n  },\r\n  fullList: {\r\n    width: \"auto\"\r\n  },\r\n  nested: {\r\n    paddingLeft: 30\r\n  }\r\n});\r\n\r\nexport default function TemporaryDrawer(props) {\r\n  const classes = useStyles();\r\n\r\n  const handleDrawer = props.handleDrawer;\r\n  const filterCols = props.filterCols;\r\n  const handleCheckedFilters = props.handleCheckedFilters;\r\n  const reset = props.reset;\r\n  const doFilter = props.doFilter;\r\n  const filterWords = props.filterWords;\r\n\r\n  const [opened, setOpened] = React.useState({\r\n    status: false,\r\n    postdistrikt: false,\r\n    postnummer: false\r\n  });\r\n\r\n  \r\n  const handleClick = text => { \r\n    setOpened({\r\n      ...opened,\r\n      [text]: !opened[text]\r\n    });\r\n  };\r\n  \r\n\r\n  const _list = (cols,key) => {\r\n    return cols[key].map((col, index) => (\r\n      <ListItem key={key + \"_\" + index} button className={classes.nested}>\r\n        <ListItemText primary={Object.keys(col)[0]} />\r\n        <ListItemSecondaryAction>\r\n          <Checkbox\r\n            checked={Object.values(col)[0]}\r\n            onChange={(e) => handleCheckedFilters(key + \"_\" + Object.keys(col)[0], e)}\r\n            edge=\"end\"\r\n          />\r\n        </ListItemSecondaryAction>\r\n      </ListItem>\r\n    ));\r\n  }\r\n  const sideList = (categories, cols) => {\r\n    let comps = {};\r\n    categories.forEach(categorie => {\r\n      if (cols[categorie]) {\r\n        comps[categorie] = _list(cols,categorie);\r\n      }  \r\n    });\r\n    \r\n    return (\r\n      <div className={classes.list} role=\"presentation\">\r\n        <List>\r\n        <ListItem>\r\n            <ListItemIcon>\r\n              <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={doFilter}>\r\n                Filtrere\r\n              </Button>\r\n            </ListItemIcon>\r\n            <ListItemSecondaryAction>\r\n              <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={reset}>\r\n                Nulstil\r\n              </Button>\r\n            </ListItemSecondaryAction>\r\n          </ListItem>\r\n        </List>\r\n        <List dense>\r\n          {categories.map((text, index) => (\r\n            <React.Fragment key={\"cat_\"+index}>\r\n              <ListItem button key={text} onClick={() => handleClick(text)}>\r\n                <ListItemText primary={text} />\r\n                {opened[text] ? <ExpandLess /> : <ExpandMore />}\r\n              </ListItem>\r\n              <Collapse in={opened[text]} timeout=\"auto\" unmountOnExit>\r\n                <List component=\"div\" disablePadding dense>\r\n                  {comps[text]}\r\n                </List>\r\n              </Collapse>\r\n            </React.Fragment>\r\n          ))}\r\n        </List>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {/* <Button onClick={toggleDrawer('right', true)}>Open Right</Button> */}\r\n      <Drawer anchor=\"right\" open={props.drawerOpen} onClose={handleDrawer}>\r\n        {sideList(filterWords, filterCols)}\r\n      </Drawer>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport { InputLabel } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\nroot: {\r\n    flexGrow: 1\r\n  },\r\n  container: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  textField: {\r\n    marginLeft: theme.spacing(1),\r\n    marginRight: theme.spacing(1),\r\n    width: 200\r\n  }\r\n}));\r\n\r\n\r\n\r\nfunction LoginComponent(props){\r\n    const classes = useStyles();\r\n    \r\n    // const [loginData, setLoginData] = React.useState({\r\n    //     email:{value:\"\", error:false, helperText:\"*\"},\r\n    //     password: {value:\"\", error:false, helperText:\"*\"},\r\n    // });\r\n\r\n    // const handleInputChange = (event) =>{\r\n    //     const target = event.target;\r\n    //     const value = target.value;\r\n    //     const name = target.name;\r\n\r\n    //     setLoginData({\r\n    //         ...loginData,\r\n    //         [name]: {\r\n    //             ...loginData[name],\r\n    //             value:value\r\n    //         }\r\n    //     })\r\n    // } \r\n\r\n    const loginData = props.loginData;\r\n    const handleInputChange = props.handleLoginDatachange;\r\n    const errorMessage = props.errorMessage;\r\n\r\n    return (\r\n        <>\r\n            <Grid item xs={3}>\r\n                <InputLabel>E-mail/brugernavn</InputLabel>\r\n                <TextField \r\n                     \r\n                    id=\"standard-basic\" \r\n                    label=\"\" \r\n                    name=\"user\"\r\n                    variant=\"standard\"\r\n                    placeholder=\"\"\r\n                    InputLabelProps={{shrink:false}}\r\n                    value={loginData.user.value}\r\n                    error={errorMessage}\r\n                    helperText={errorMessage ? \"Der var fejl ved login. Prøv igen\":\"\"}\r\n                    onChange={handleInputChange}\r\n                    />\r\n            </Grid>\r\n            \r\n            <Grid item xs={3}>\r\n                <InputLabel>Adgangskode</InputLabel>\r\n                <TextField \r\n                    type=\"password\" \r\n                     \r\n                    id=\"standard-basic\" \r\n                    label=\"\" \r\n                    name=\"password\"\r\n                    variant=\"standard\"\r\n                   // error={loginData.password.value.length < 3}\r\n                    value={loginData.password.value}\r\n                    onChange={handleInputChange}\r\n                    />\r\n            </Grid>\r\n            \r\n        </> \r\n    );\r\n}\r\n\r\nexport default LoginComponent;\r\n","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport MuiAlert from '@material-ui/lab/Alert';\r\n\r\nfunction Alert(props) {\r\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\r\n}\r\n\r\n\r\nexport default function CreateUserDialog(props) {\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const [userInfo, setUserInfo] = React.useState({\r\n    name: {value:\"\", error:false, helperText:\"\"},\r\n    email: {value:\"\", error:false, helperText:\"\"},\r\n    organisation:{value:\"\", error:false, helperText:\"\"},\r\n    password:{value:\"\", error:false, helperText:\"\"},\r\n    password2:{value:\"\", error:false, helperText:\"\"},\r\n    consent: {value:false, error:false, helperText:\"\"},\r\n    btnDisabled : true\r\n  });\r\n\r\n\r\n\r\n  const isDisabled = () =>  (displayError(\"name\") || displayError(\"email\") || displayError(\"organisation\")\r\n                              || displayError(\"password\") || displayError(\"password2\") || !userInfo.consent.value\r\n                            )\r\n  \r\n  const displayError = (name) => {\r\n    if(name === \"password2\" \r\n      && userInfo[name].value.length < 2\r\n      && userInfo.password.value !== userInfo.password2.value){\r\n        console.log(userInfo.password.value,\" and \",userInfo.password2.value,\" are not equal\")\r\n        return true;\r\n      }\r\n\r\n    if(userInfo[name].value.length < 2) return true;\r\n\r\n    return false\r\n    \r\n  }\r\n\r\n  const handleInputChange = (event) => {\r\n    const target = event.target;\r\n    const value = target.type === \"checkbox\" ? target.checked : target.value;\r\n    const name = target.name;\r\n\r\n    setUserInfo({\r\n      ...userInfo,\r\n      [name]:{\r\n        ...userInfo[name],\r\n        value:value,\r\n      //  error: displayError(name)\r\n      },\r\n      btnDisabled: isDisabled()\r\n    });\r\n\r\n  }\r\n\r\n  \r\n  \r\n  const handleRegister = () => {\r\n    let data = {\r\n      name: userInfo.name.value,\r\n      email: userInfo.email.value,\r\n      organisation: userInfo.organisation.value,\r\n      password: userInfo.password.value\r\n    }\r\n    props.handleRegister(data);\r\n   // props.handleCreateDialogClose();\r\n  }\r\n\r\n  // const handleOpen = props.handleCreateDialogOpen;\r\n  const handleDialogClose = props.handleCreateDialogClose;\r\n  const errorMessage = props.errorMessage;\r\n\r\n  return (\r\n    <div>\r\n      \r\n      <Dialog open={props.isRegisterFormShown} onClose={handleDialogClose} aria-labelledby=\"form-dialog-title\">\r\n        <DialogTitle id=\"form-dialog-title\">Opret dig som bruger</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n          </DialogContentText>\r\n          {\r\n            errorMessage && <Alert severity=\"error\">{errorMessage}</Alert>\r\n          }\r\n          <TextField\r\n            autoFocus\r\n            margin=\"dense\"\r\n            name=\"name\"\r\n            id=\"name\"\r\n            label=\"Navn:\"\r\n            value={userInfo.name.value}\r\n            error={userInfo.name.error}\r\n            helperText={userInfo.name.helperText}\r\n            onChange={handleInputChange}\r\n            fullWidth\r\n          />\r\n          <TextField\r\n            autoFocus\r\n            margin=\"dense\"\r\n            id=\"organisation\"\r\n            name=\"organisation\"\r\n            label=\"Organisation:\"\r\n            value={userInfo.organisation.value}\r\n            onChange={handleInputChange}\r\n            error={userInfo.organisation.error}\r\n            helperText={userInfo.organisation.helperText}\r\n            fullWidth\r\n          />\r\n          <TextField\r\n            autoFocus\r\n            margin=\"dense\"\r\n            id=\"email\"\r\n            name=\"email\"\r\n            label=\"E-mail/brugernavn\"\r\n            type=\"email\"\r\n            value={userInfo.email.value}\r\n            error={userInfo.email.error}\r\n            helperText={userInfo.email.helperText}\r\n            onChange={handleInputChange}\r\n            fullWidth\r\n          />\r\n          <TextField\r\n            autoFocus\r\n            margin=\"dense\"\r\n            id=\"password\"\r\n            name=\"password\"\r\n            label=\"Adganskode:\"\r\n            type=\"password\"\r\n            value={userInfo.password.value}\r\n            error={userInfo.password.error}\r\n            helperText={userInfo.password.helperText}\r\n            onChange={handleInputChange}\r\n            fullWidth\r\n          />\r\n          <TextField\r\n            autoFocus\r\n            margin=\"dense\"\r\n            id=\"password2\"\r\n            name=\"password2\"\r\n            label=\"Gentag adgangskode:\"\r\n            type=\"password\"\r\n            value={userInfo.password2.value}\r\n            error={userInfo.password2.error}\r\n            helperText={userInfo.password2.helperText}\r\n            onChange={handleInputChange}\r\n            fullWidth\r\n          />\r\n          <FormControlLabel\r\n            control={<Checkbox \r\n                        checked={userInfo.consent.value}\r\n                        name=\"consent\"\r\n                        onChange={handleInputChange} />\r\n            }\r\n            \r\n            label=\"Med min oprettelse som bruger giver jeg mit samtykke til, at mine oplysninger bliver opbevaret, således at projektet kan kontakte mig, fx. ifm. driftsforstyrrelser, nye versioner, nye tiltag, mv.\"\r\n          />\r\n          {!userInfo.consent.value &&\r\n            <FormHelperText error>Du skal give samtykke</FormHelperText>\r\n          }\r\n          {/* {userInfo.btnDisabled &&\r\n            <FormHelperText error>Alle felter skal udfyldes korrekt.</FormHelperText>\r\n          } */}\r\n          \r\n          \r\n        </DialogContent>\r\n        <DialogActions style={{justifyContent: 'center'}} >\r\n          \r\n          <Button  disabled={!userInfo.consent.value} variant=\"contained\" onClick={handleRegister} color=\"primary\">\r\n            Opret\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n// import Button from '@material-ui/core/Button';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\n// import ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\n// import InboxIcon from '@material-ui/icons/MoveToInbox';\r\n// import DraftsIcon from '@material-ui/icons/Drafts';\r\n// import SendIcon from '@material-ui/icons/Send';\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\n\r\nconst StyledMenu = withStyles({\r\n  paper: {\r\n    border: '1px solid #d3d4d5',\r\n  },\r\n})((props) => (\r\n  <Menu\r\n    elevation={0}\r\n    getContentAnchorEl={null}\r\n    anchorOrigin={{\r\n      vertical: 'bottom',\r\n      horizontal: 'center',\r\n    }}\r\n    transformOrigin={{\r\n      vertical: 'top',\r\n      horizontal: 'center',\r\n    }}\r\n    {...props}\r\n  />\r\n));\r\n\r\nconst StyledMenuItem = withStyles((theme) => ({\r\n  root: {\r\n    '&:focus': {\r\n      backgroundColor: theme.palette.primary.main,\r\n      '& .MuiListItemIcon-root, & .MuiListItemText-primary': {\r\n        color: theme.palette.common.white,\r\n      },\r\n    },\r\n  },\r\n}))(MenuItem);\r\n\r\nexport default function Logout(props) {\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton\r\n        aria-controls=\"customized-menu\"\r\n        aria-haspopup=\"true\"\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        onClick={handleClick}\r\n      >\r\n        <AccountCircleIcon/>\r\n      </IconButton>\r\n      <StyledMenu\r\n        id=\"customized-menu\"\r\n        anchorEl={anchorEl}\r\n        keepMounted\r\n        open={Boolean(anchorEl)}\r\n        onClose={handleClose}\r\n      >\r\n        \r\n        <StyledMenuItem\r\n         onClick = {props.handleLogout}\r\n        >\r\n          {/* <ListItemIcon>\r\n            <InboxIcon fontSize=\"small\" />\r\n          </ListItemIcon> */}\r\n          <ListItemText primary=\"Log ud\" />\r\n        </StyledMenuItem>\r\n      </StyledMenu>\r\n    </div>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\n\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { MuiThemeProvider, createMuiTheme } from \"@material-ui/core/styles\";\r\n\r\nimport moment from \"moment\";\r\nimport \"moment/locale/da\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport CloudDownload from \"@material-ui/icons/CloudDownload\";\r\nimport Map from \"@material-ui/icons/Map\";\r\nimport TableChart from \"@material-ui/icons/TableChart\";\r\nimport BarChart from \"@material-ui/icons/BarChart\";\r\nimport MomentUtils from \"@date-io/moment\";\r\nimport { MuiPickersUtilsProvider } from \"@material-ui/pickers\";\r\nimport { DatePicker } from \"@material-ui/pickers\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Link from '@material-ui/core/Link';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport MapData from \"./Map.js\";\r\nimport GridData from \"./Grid.js\";\r\nimport GraphData from \"./Graph.js\";\r\nimport Title from \"./components/Title\";\r\n\r\nimport \"./App.css\";\r\nimport classnames from \"classnames\";\r\nimport ReactExport from \"react-data-export\";\r\nimport jQuery from \"jquery\";\r\nimport { navigate } from \"@reach/router\";\r\nimport FilterListIcon from \"@material-ui/icons/FilterList\";\r\nimport TemporaryDrawer from \"./Drawer\";\r\nimport LoginComponent from \"./components/Login/Login\";\r\nimport CreateUserDialog from \"./components/Register/create\";\r\nimport Logout from \"./components/Logout\";\r\n\r\nmoment.locale(\"da\");\r\n\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\nconst filterWords = [\"status\", \"virksomhedsform\", \"hovedbranche\"];\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    flexGrow: 1\r\n  },\r\n  container: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\"\r\n  },\r\n  textField: {\r\n    marginLeft: theme.spacing(1),\r\n    marginRight: theme.spacing(1),\r\n    width: 200\r\n  },\r\n  dense: {\r\n    marginTop: 19\r\n  },\r\n  menu: {\r\n    width: 300\r\n  },\r\n  progress: {\r\n    margin: theme.spacing(1) * 2\r\n  },\r\n  nested: {\r\n    paddingLeft: theme.spacing(4)\r\n  }\r\n});\r\n\r\nconst theme = createMuiTheme({\r\n  typography: {\r\n    useNextVariants: true,\r\n    suppressDeprecationWarnings: true\r\n  }\r\n});\r\n\r\nfunction uniqueValues(colValues) {\r\n  let vals = [...new Set(colValues)];\r\n  return vals;\r\n}\r\n\r\nconst getVirkForm = form =>{\r\n  switch(form){\r\n    case 10 : return \"Enkeltmandsvirksomhed\";\r\n    case 15 : return \"Personligt ejet Mindre Virksomhed\";\r\n    case 20 : return \"Dødsbo\";\r\n    case 30 : return \"Interessentskab\";\r\n    case 40 : return \"Kommanditselskab\";\r\n    case 45 : return \"Medarbejderinvesteringsselskab\";\r\n    case 50 : return \"Partrederi\";\r\n    case 60 : return \"Aktieselskab\";\r\n    case 70 : return \"Kommanditaktieselskab/Partnerskab\";\r\n    case 80 : return \"Anpartsselskab\";\r\n    case 81 : return \"Iværksætterselskab\";\r\n    case 90 : return \"Fond\";\r\n    case 100 : return \"Erhvervsdrivende fond\";\r\n    case 110 : return \"Forening\";\r\n    case 115 : return \"Frivillig forening\";\r\n    case 130 : return \"Andelselskab(-forening)\";\r\n    case 140 : return \"Andelselskab(-forening) med begrænset ansvar\";\r\n    case 150 : return \"Forening eller selskab med begrænset ansvar\";\r\n    case 151 : return \"Selskab med begrænset ansvar\";\r\n    case 152 : return \"Forening med begrænset ansvar\";\r\n    case 160 : return \"Europæisk Økonomisk Firmagruppe\";\r\n    case 170 : return \"Filial af udenlandsk aktieselskab, kommanditakties\";\r\n    case 180 : return \"Filial af udenlandsk anpartselskab eller selskab\";\r\n    case 190 : return \"Filial af udenlandsk virksomhed med begrænset ansv\";\r\n    case 195 : return \"SCE-selskab\";\r\n    case 196 : return \"Filial af SCE-selskab\";\r\n    case 200 : return \"Filial af anden udenlandsk virksomhed\";\r\n    case 210 : return \"Anden udenlandsk virksomhed\";\r\n    case 220 : return \"Fast forretningssted af Europæisk økonomisk Firmag\";\r\n    case 230 : return \"Offentlige arbejdsplads\";\r\n    case 235 : return \"Offentlige arbejdsplads\";\r\n    case 245 : return \"Offentlige arbejdsplads\";\r\n    case 250 : return \"Offentlige arbejdsplads\";\r\n    case 260 : return \"Folkekirkelige institutioner\";\r\n    case 270 : return \"Enhed under oprettelse i Erhvervs- og Selskabsstyr\";\r\n    case 280 : return \"Øvrige virksomhedsformer\";\r\n    case 285 : return \"Særlig finansiel virksomhedsform\";\r\n    case 290 : return \"SE-selskab\";\r\n    case 291 : return \"Filial af SE-selskab\";\r\n    case 990 : return \"Uoplyst virksomhedsform\";\r\n    default : return form;\r\n  }\r\n}\r\n\r\nfunction uniqueValuesGroupedByKey(arrOfObj, keys) {\r\n  let ret = {};\r\n\r\n  function uniqueElemsOfSameKey(_arrOfObj, key) {\r\n    const values = _arrOfObj.map(elem => elem[key]);\r\n    let ret  = uniqueValues(values);\r\n    ret = ret.map(elem => ({[elem] :false}));\r\n    return ret;\r\n  }\r\n\r\n  keys.forEach(key => {\r\n    ret[key] = uniqueElemsOfSameKey(arrOfObj, key);\r\n  });\r\n\r\n  return ret;\r\n}\r\n\r\nfunction TabContainer(props) {\r\n  return <div>{props.children}</div>;\r\n}\r\n\r\nTabContainer.propTypes = {\r\n  children: PropTypes.node.isRequired\r\n};\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      value: 0,\r\n      startDate: moment()\r\n        .subtract(1, \"months\")\r\n        .startOf(\"month\")\r\n        .format(\"YYYY-MM-DD\"),\r\n      endDate: moment()\r\n        .subtract(1, \"months\")\r\n        .endOf(\"month\")\r\n        .format(\"YYYY-MM-DD\"),\r\n      data: [],\r\n      kommuner: [],\r\n      komkode: this.props.komnr,// || '165',\r\n     \r\n      csvData: [], \r\n      loading: true,\r\n      completed: 0,\r\n      canSendRequest: false,\r\n      filterOpen: false,\r\n      drawerOpen: false,\r\n      alertOpen: false,\r\n      alertMessage: '',\r\n      uniqueVals: {},\r\n      dataToRender: [],\r\n      isLoginShown : true,\r\n      isRegisterFormShown : false,\r\n      sessionId : sessionStorage.getItem(\"sessionId\") || \"\",\r\n      loginData:{\r\n        user:{value:\"\", error:false, helperText:\"*\"},\r\n        password: {value:\"\", error:false, helperText:\"*\"}\r\n      },\r\n      registrationErrorMessage: \"\",\r\n      loginErrorMessage:false\r\n      // registrationData: {\r\n      //   name: {value:\"\", error:false, helperText:\"*\"},\r\n      //   email: {value:\"\", error:false, helperText:\"*\"},\r\n      //   organisation:{value:\"\", error:false, helperText:\"*\"},\r\n      //   password:{value:\"\", error:false, helperText:\"*\"},\r\n      //   password2:{value:\"\", error:false, helperText:\"*\"},\r\n      //   consent: {value:true, error:false, helperText:\"*\"},\r\n      //   btnDisabled : true\r\n      // } \r\n    };\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleStart = this.handleStart.bind(this);\r\n    this.handleEnd = this.handleEnd.bind(this);\r\n    this.handleSelect = this.handleSelect.bind(this);\r\n    this.handleDoneClick = this.handleDoneClick.bind(this);\r\n    this.handleFilterOpen = this.handleFilterOpen.bind(this);\r\n    this.handleFilterClose = this.handleFilterClose.bind(this);\r\n    this.handleDrawerOpen = this.handleDrawerOpen.bind(this);\r\n    this.handleCheckedFilters = this.handleCheckedFilters.bind(this);\r\n    this.reset = this.reset.bind(this);\r\n    this.updateRenderDataFromTable = this.updateRenderDataFromTable.bind(this);\r\n    this.doFilter = this.doFilter.bind(this);\r\n    this.onAlertClose = this.onAlertClose.bind(this);\r\n    this.handleCreateDialogOpen = this.handleCreateDialogOpen.bind(this);\r\n    this.handleCreateDialogClose = this.handleCreateDialogClose.bind(this);\r\n    this.handleLogin = this.handleLogin.bind(this);\r\n    this.handleLogout = this.handleLogout.bind(this);\r\n    this.handleRegister = this.handleRegister.bind(this);\r\n    this.handleLoginDatachange = this.handleLoginDatachange.bind(this);\r\n  }\r\n\r\n  onAlertClose(){\r\n    this.setState({alertOpen: false});\r\n  }\r\n\r\n  handleLoginDatachange(event){\r\n    let that = this;\r\n    console.log(\"I was called!!!\");\r\n      const target = event.target;\r\n        const value = target.value;\r\n        const name = target.name;\r\n\r\n        that.setState({\r\n          loginData: {\r\n            ...this.state.loginData,\r\n            [name]: {\r\n                ...this.state.loginData[name],\r\n                value:value\r\n            }\r\n          }\r\n        });\r\n  }\r\n\r\n  doFilter(){\r\n    const uniqueVals = this.state.uniqueVals;\r\n    const filteredCategories = Object.keys(uniqueVals);\r\n    let filters = {};\r\n    filteredCategories.forEach(cat =>{\r\n      let temp = uniqueVals[cat];\r\n      \r\n      filters[cat] = temp.filter(obj => {\r\n        return Object.values(obj)[0] === true;\r\n      })\r\n     .map(elem => {\r\n        return Object.keys(elem)[0];\r\n      }); \r\n     });\r\n     const dataToRender = this.state.dataToRender;\r\n     const data = dataToRender.filter(row => {\r\n      let res = true;\r\n      filteredCategories.forEach(key =>{\r\n        if(filters[key].length > 0 \r\n          && filters[key].indexOf(row.properties[key]) === -1)\r\n              res = false;\r\n      });\r\n      return res;\r\n     });\r\n     const message = `${data.length} ud af ${this.state.data.length}`;\r\n     this.setState({\r\n       dataToRender : data, \r\n       drawerOpen : false,\r\n       alertMessage: message,\r\n       alertOpen: true\r\n      });\r\n     \r\n  }\r\n\r\n  updateRenderDataFromTable(filteredRows){\r\n    this.setState({csvData: filteredRows});\r\n  }\r\n\r\n  reset(){\r\n    this.setState({\r\n      dataToRender: this.state.data, \r\n      uniqueVals: uniqueValuesGroupedByKey(\r\n        this.state.data.map(feature => feature.properties), \r\n        filterWords\r\n        )\r\n    });\r\n  }\r\n\r\n  handleCheckedFilters(text, event){ \r\n    let [group, name] = text.split(\"_\");\r\n    let checkedGroup = this.state.uniqueVals[group];\r\n    let indexToUpdate = checkedGroup.findIndex(elem => Object.keys(elem)[0] === name);\r\n    let elementToUpdate = checkedGroup[indexToUpdate];\r\n    //Toggle to false or true\r\n    elementToUpdate[name] = !elementToUpdate[name];\r\n\r\n    this.setState({uniqueVals:{\r\n      ...this.state.uniqueVals,\r\n      [group]: [\r\n        ...checkedGroup.slice(0,indexToUpdate),\r\n        elementToUpdate,\r\n        ...checkedGroup.slice(indexToUpdate+1)\r\n      ]\r\n    }});\r\n  }\r\n\r\n  handleFilterOpen() {\r\n    this.setState({ filterOpen: !this.state.filterOpen });\r\n  }\r\n\r\n  \r\n\r\n  \r\n\r\n  handleLogout(){\r\n    let that = this;\r\n    let sessionUrl = \"https://offentligedata.admin.gc2.io/api/v2/session/stop\";\r\n    jQuery.get(sessionUrl,function(res){\r\n      if(res && res.success){\r\n        sessionStorage.removeItem(\"sessionId\");\r\n        that.setState({\r\n          sessionId : \"\",\r\n          data: [],\r\n          csvData : [],\r\n          dataToRender : []\r\n        });\r\n        if(window.lfMap && window.geojsonLayer){ console.log(\"removelayer called\");\r\n          window.lfMap.removeLayer(window.geojsonLayer);\r\n        }\r\n      }\r\n    });\r\n\r\n    \r\n  }\r\n\r\n  handleDrawerOpen() {\r\n    this.setState({ drawerOpen: !this.state.drawerOpen });\r\n  }\r\n\r\n  handleFilterClose() {\r\n    this.setState({ filterOpen: false });\r\n  }\r\n /*\r\n  https://drayton.mapcentia.com/api/v1/sql/ballerup?q=select right(komkode, 3)::int komkode,komnavn from data.kommune group by komkode, komnavn order by komnavn\r\n */\r\n  getKommuner() {\r\n    let komUrl =\r\n      \"https://drayton.mapcentia.com/api/v1/sql/ballerup?q=select right(komkode, 3)::int komkode, \" +\r\n      \"komnavn from data.kommune group by komkode, komnavn order by komnavn\";\r\n    //komUrl = \"kom.json\";\r\n    let that = this;\r\n    jQuery.ajax({\r\n      url: komUrl,\r\n      type: \"GET\",\r\n      dataType: \"json\",\r\n      success: function(res) {\r\n        let koms = res.features.map(feature => feature.properties);\r\n        that.setState(preveState => ({ kommuner: koms }));\r\n      }\r\n    });\r\n  }\r\n\r\n  handleLogin(){\r\n    let that = this;\r\n    let sessionUrl = \"https://offentligedata.admin.gc2.io/api/v2/session/start\";\r\n    let _loginData = {\r\n      user: that.state.loginData.user.value,\r\n      password: that.state.loginData.password.value,\r\n      database: \"ballerup\"\r\n    };\r\n\r\n    jQuery.get(sessionUrl, _loginData, function(res){\r\n      if(res && res.success){\r\n        sessionStorage.setItem(\"sessionId\", res.data.session_id);\r\n        that.setState({sessionId: res.data.session_id, loginErrorMessage : false});\r\n        console.log(\"login succeeded, session id: \", res.data.session_id);\r\n      }\r\n    },\"json\")\r\n    .fail(function(res){\r\n      that.setState({loginErrorMessage : true});\r\n    })\r\n    ;\r\n    //this.setState({sessionId : \"loggedin\"});\r\n  }\r\n\r\n  handleRegister(userObj){\r\n    let that = this;\r\n    let userUrl = \"https://offentligedata.admin.gc2.io/api/v2/user\";\r\n    let sessionUrl = \"https://offentligedata.admin.gc2.io/api/v2/session/start\";\r\n\r\n    let data = {\r\n      name: userObj.email,\r\n      email: userObj.email,\r\n      password: userObj.password,\r\n      subuser: true,\r\n      usergroup: \"erhvervsinfo\",\r\n      parentdb: \"ballerup\",\r\n      properties: {\r\n        org: userObj.organisation,\r\n        name: userObj.name\r\n      }\r\n    }\r\n\r\n    let _loginData = {\r\n      user: userObj.email,\r\n      password: userObj.password,\r\n      database: \"ballerup\"\r\n    }\r\n    console.log(\"before posting data\");\r\n    jQuery.post(userUrl, JSON.stringify(data), function(res){\r\n      console.log(\"data posted successfully!\");\r\n      console.log(res);\r\n      if(res && res.success){\r\n        jQuery.get(sessionUrl, _loginData, function(res){\r\n          if(res && res.success){\r\n            that.handleCreateDialogClose();\r\n            sessionStorage.setItem(\"sessionId\", res.data.session_id);\r\n            that.setState({sessionId: res.data.session_id});\r\n            console.log(\"login succeeded, session id: \", res.data.session_id);\r\n          }\r\n        },\"json\");\r\n      }else if(res && !res.success){\r\n        \r\n      }\r\n\r\n    },\r\n    \"json\")\r\n    .fail(function(res){\r\n      console.log(\"login failed, message => \", res.responseJSON.message);\r\n      that.setState({registrationErrorMessage: that.getErrorMessage(res.responseJSON.errorCode)});\r\n    })\r\n    ;\r\n\r\n  }\r\n\r\n  getErrorMessage(errorMessage){\r\n    switch(errorMessage){\r\n      case 'SUB_USER_ALREADY_EXISTS':\r\n      case 'PARENT_USER_EXISTS_WITH_NAME':\r\n      case 'USER_ALREADY_EXISTS':\r\n      case 'EMAIL_ALREADY_EXISTS':\r\n        return 'E-mail/brugernavn er allerede taget.';\r\n      case 'WEAK_PASSWORD':\r\n        return 'Adgangskode skal opfylde følgende kriterier: mindst 8 tegn langt, mindst 1 tal og mindst 1 stort bogstav';\r\n      default:\r\n        return 'Der var en fejl ved oprettelse. Prøv igen.'\r\n    }\r\n  }\r\n  getData(komkode, startDate, endDate) {\r\n    this.setState(preveState => ({ csvData: [], loading: true }));\r\n    let that = this;\r\n    let sessionId = this.state.sessionId;\r\n    let postData = {\r\n      session_id: sessionId,\r\n      komkode : komkode,\r\n      startdate: startDate,\r\n      enddate: endDate,\r\n      database:\"ballerup\"\r\n    };\r\n\r\n    let jsonData = JSON.stringify(postData);\r\n\r\n    if (!komkode) {\r\n      this.setState({ loading: false });\r\n      return;\r\n    }\r\n\r\n    let newUrl = \"https://offentligedata.admin.gc2.io/extensions/offentligedata/api/request\"\r\n    let dataUrl =\r\n      \"https://drayton.mapcentia.com/api/v1/sql/ballerup?q=SELECT * FROM cvr.flyt_fad_dev(\" +\r\n      komkode +\r\n      \",'\"+ startDate +\"','\"+ endDate +\"')&srs=4326\";\r\n      jQuery.ajax({\r\n      url: newUrl, // dataUrl,\r\n      type: \"POST\",\r\n      dataType: \"json\",\r\n      data: jsonData,\r\n      success: function(res) {\r\n        let csv = res.features.map(feature => feature.properties);\r\n        res.features.forEach(feature => {\r\n          let form = feature.properties.virksomhedsform;\r\n          feature.properties.virksomhedsform = getVirkForm(form);\r\n          let _startdato = feature.properties.startdato;\r\n          feature.properties.startdato = (_startdato && _startdato.length > 0) ?\r\n                    _startdato.substring(0,10) : '';\r\n        });\r\n        that.setState(prevState => ({\r\n          csvData: csv,\r\n          data: res.features,\r\n          dataToRender: res.features,\r\n          loading: false,\r\n          uniqueVals: uniqueValuesGroupedByKey(csv,filterWords)\r\n        }));\r\n      }\r\n      // ,\r\n      // timeout: 15000,\r\n      // error: function(xhr, textStatus, errorThrown){\r\n      //   console.log(\"error timeout!!!!\");\r\n      //   that.setState({loading : false});\r\n      // }\r\n    });\r\n  }\r\n\r\n  handleSelect(event) {\r\n    event.persist();\r\n    this.setState(prevState => ({ komkode: event.target.value }));\r\n  }\r\n\r\n  componentDidMount() { console.log(\"\");\r\n    let { komkode, startDate, endDate } = this.state;\r\n    this.getData(komkode, startDate, endDate);\r\n    this.getKommuner();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n  }\r\n\r\n  handleChange(event, value) {\r\n    this.setState({ value });\r\n  }\r\n\r\n  handleDoneClick() {\r\n    let { komkode, startDate, endDate } = this.state;\r\n    if(!komkode) komkode = 165;\r\n    this.getData(komkode, startDate, endDate);\r\n    navigate(\"#/\" + komkode);\r\n  }\r\n\r\n  handleStart(date) {\r\n    this.setState({\r\n      startDate: date.format(\"YYYY-MM-DD\")\r\n    });\r\n  }\r\n\r\n  handleEnd(date) {\r\n    this.setState({\r\n      endDate: date.format(\"YYYY-MM-DD\")\r\n    });\r\n  }\r\n\r\n  handleCreateDialogOpen(){\r\n    console.log(\"Createdialog open\")\r\n    this.setState({\r\n      isRegisterFormShown : true,\r\n      isLoginShown : false\r\n    });\r\n  }\r\n\r\n  handleCreateDialogClose(){\r\n    this.setState({\r\n      isRegisterFormShown : false,\r\n      isLoginShown : true  \r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { value, startDate, endDate, kommuner, komkode } = this.state;\r\n    const locale = \"da\";\r\n    return (\r\n      <MuiThemeProvider theme={theme}>\r\n        <div className=\"app\">\r\n          <div className={this.state.loading ? \"loading\" : \"\"}></div>\r\n          \r\n          <TemporaryDrawer\r\n            handleDrawer={this.handleDrawerOpen}\r\n            drawerOpen={this.state.drawerOpen}\r\n            filterCols={this.state.uniqueVals}\r\n            handleCheckedFilters={this.handleCheckedFilters}\r\n            reset={this.reset}\r\n            doFilter={this.doFilter}\r\n            filterWords={filterWords}\r\n          />\r\n\r\n          <CreateUserDialog \r\n            handleRegister = {this.handleRegister}\r\n            isRegisterFormShown={this.state.isRegisterFormShown}\r\n            handleCreateDialogClose={this.handleCreateDialogClose}\r\n            handleCreateDialogOpen={this.handleCreateDialogOpen}\r\n            errorMessage={this.state.registrationErrorMessage}\r\n          />\r\n          <div className=\"\">\r\n            <AppBar position=\"static\" color=\"default\">\r\n              <Toolbar>\r\n                <Grid container>\r\n                  <Grid item xs={2}>\r\n                    <Title/>\r\n                  </Grid>\r\n                  {this.state.sessionId === \"\" && (\r\n                    <>\r\n                  {/* <Grid item xs={7}> */}\r\n                    <LoginComponent \r\n                      loginData={this.state.loginData}\r\n                      handleLoginDatachange = {this.handleLoginDatachange} \r\n                      errorMessage = {this.state.loginErrorMessage}\r\n                    /> \r\n                  {/* </Grid> */}\r\n                  <Grid item xs={1}>\r\n                      <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={this.handleLogin}>\r\n                      Log på\r\n                      </Button> \r\n                  </Grid> \r\n                  {/* <Grid item xs={1}>eller</Grid> */}\r\n                   <Grid item xs={2}>\r\n                   eller &nbsp;<Link color=\"inherit\" underline=\"always\" component=\"button\" onClick={this.handleCreateDialogOpen} size=\"small\">Opret dig som bruger</Link>\r\n                    </Grid>\r\n                  {/*<Grid item xs={2}>\r\n                    \r\n                {/*</Grid>*/}\r\n                </>\r\n                  )}\r\n                  \r\n                  {this.state.sessionId !== \"\" && (\r\n\r\n\r\n                    <>\r\n                    <Grid item xs={2}>\r\n                      <form\r\n                        className={classnames.container}\r\n                        noValidate\r\n                        autoComplete=\"off\"\r\n                      >\r\n                        <TextField\r\n                          id=\"standard-select\"\r\n                          select\r\n                          label=\"Kommune\"\r\n                          placeholder=\"Placeholder\"\r\n                          className={classnames.textField}\r\n                          value={this.state.komkode || \"\"}\r\n                          onChange={this.handleSelect}\r\n                          SelectProps={{\r\n                            native: true\r\n                          }}\r\n                          helperText=\"\"\r\n                          InputLabelProps={{ shrink: true }}\r\n                        >\r\n                          {kommuner.map(kom => {\r\n                            \r\n                            return (\r\n                              <option key={kom.komkode} value={kom.komkode}>\r\n                                {kom.komnavn}\r\n                              </option>\r\n                            );\r\n                          })}\r\n                        </TextField>\r\n                      </form>\r\n                    </Grid>\r\n                    <Grid item xs={2}>\r\n                      <MuiPickersUtilsProvider\r\n                        utils={MomentUtils}\r\n                        locale={locale}\r\n                        moment={moment}\r\n                      >\r\n                        <DatePicker\r\n                          value={startDate}\r\n                          label=\"Startdato\"\r\n                          format=\"DD MMM YYYY\"\r\n                          onChange={this.handleStart}\r\n                        />\r\n                      </MuiPickersUtilsProvider>\r\n                    </Grid>\r\n                    <Grid item xs={2}>\r\n                      <MuiPickersUtilsProvider utils={MomentUtils}>\r\n                        <DatePicker\r\n                          value={endDate}\r\n                          label=\"Slutdato\"\r\n                          format=\"DD MMM YYYY\"\r\n                          onChange={this.handleEnd}\r\n                        />\r\n                      </MuiPickersUtilsProvider>\r\n                    </Grid>\r\n                    \r\n                    </>  \r\n                  )}\r\n\r\n                  {this.state.sessionId !== \"\" &&(\r\n                    <>\r\n                    \r\n                   <Grid item xs={3}>\r\n                    <IconButton\r\n                      arial-label=\"Done\"\r\n                      onClick={this.handleDoneClick}\r\n                    >\r\n                      <Tooltip title=\"Send\">\r\n                        <SendIcon />\r\n                      </Tooltip>\r\n                    </IconButton>\r\n                    <IconButton\r\n                      arial-label=\"Filter\"\r\n                      onClick={this.handleDrawerOpen}\r\n                    >\r\n                      <Tooltip title=\"Filter\">\r\n                        <FilterListIcon />\r\n                      </Tooltip>\r\n                    </IconButton>\r\n                    {this.state.csvData.length > 0 && (\r\n                      <ExcelFile\r\n                        element={\r\n                          <IconButton arial-label=\"Excel\">\r\n                            <Tooltip title=\"Download Excel\">\r\n                              <CloudDownload />\r\n                            </Tooltip>\r\n                          </IconButton>\r\n                        }\r\n                        filename={\r\n                          \"export_\" + komkode + \"_\" + startDate + \"_\" + endDate\r\n                        }\r\n                      >\r\n                        <ExcelSheet data={this.state.csvData} name=\"CVR\">\r\n                          <ExcelColumn label=\"Status\" value=\"status\" />\r\n                          <ExcelColumn label=\"CVR nummer\" value=\"cvr-nummer\" />\r\n                          <ExcelColumn label=\"P nummer\" value=\"p-nummer\" />\r\n                          <ExcelColumn label=\"Branche\" value=\"hovedbranche\" />\r\n                          <ExcelColumn label=\"virksomhedsform\" value=\"virksomhedsform\" />\r\n                          <ExcelColumn label=\"Virksomhedsnavn\" value=\"navn\" />\r\n                          <ExcelColumn\r\n                            label=\"Kontaktperson\"\r\n                            value=\"fuldt ansvarlige deltagere\"\r\n                          />\r\n                          <ExcelColumn label=\"kvartalbes_interval\" value=\"Antal ansatte\" />\r\n                          <ExcelColumn\r\n                            label=\"Kommunekode\"\r\n                            value=\"kommunekode\"\r\n                          />\r\n                          <ExcelColumn label=\"vejnavn\" value=\"vejnavn\" />\r\n                          <ExcelColumn label=\"Husnummer\" value=\"husnummer\" />\r\n                          <ExcelColumn label=\"Postnummer\" value=\"postnummer\" />\r\n                          <ExcelColumn label=\"By\" value=\"postdistrikt\" />\r\n                          <ExcelColumn label=\"Email\" value=\"emailadresse\" />\r\n                          <ExcelColumn\r\n                            label=\"Indlæst dato\"\r\n                            value=\"indlæst dato\"\r\n                          />\r\n                        </ExcelSheet>\r\n                      </ExcelFile>\r\n                    )}\r\n                                    \r\n                  </Grid> \r\n                  <Grid item xs={1}>\r\n                    <Logout handleLogout={this.handleLogout}/>\r\n                  </Grid>\r\n                    </>\r\n                  )}    \r\n                  \r\n\r\n                  \r\n                </Grid>\r\n              </Toolbar>\r\n            </AppBar>\r\n\r\n            <Tabs value={value} onChange={this.handleChange} centered>\r\n              <Tab\r\n                icon={\r\n                  <Tooltip title=\"Kort\">\r\n                    <Map />\r\n                  </Tooltip>\r\n                }\r\n              />\r\n              <Tab\r\n                icon={\r\n                  <Tooltip title=\"Tabel\">\r\n                    <TableChart />\r\n                  </Tooltip>\r\n                }\r\n                aria-label=\"Tabel\"\r\n              />\r\n              <Tab\r\n                icon={\r\n                  <Tooltip title=\"Histogram\">\r\n                    <BarChart />\r\n                  </Tooltip>\r\n                }\r\n              />\r\n              \r\n            </Tabs>\r\n            {value === 0 && (\r\n              <TabContainer>\r\n                <MapData data={this.state.dataToRender} />\r\n              </TabContainer>\r\n            )}\r\n            {value === 1 && (\r\n              <TabContainer>\r\n                <GridData \r\n                  data={this.state.dataToRender} \r\n                  updateData={this.updateRenderDataFromTable}\r\n                  total={this.state.data.length}\r\n                  totalRendered={this.state.csvData.length}\r\n                  />\r\n              </TabContainer>\r\n            )}\r\n            {value === 2 && (\r\n              <TabContainer>\r\n                <GraphData data={this.state.dataToRender} />\r\n              </TabContainer>\r\n            )}\r\n          </div>\r\n        </div>\r\n   \r\n      </MuiThemeProvider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(App);\r\n\r\n","import React from \"react\";\r\nimport { createHistory, LocationProvider, Router } from \"@reach/router\";\r\nimport createHashSource from \"hash-source\";\r\nimport App from \"./App\";\r\n\r\nlet source = createHashSource();\r\nlet history = createHistory(source);\r\n\r\nconst Home = () => (\r\n  <LocationProvider history={history}>\r\n    <Router>\r\n      <App path=\"/\" />\r\n      <App path=\"/:komnr\" />\r\n    </Router>\r\n  </LocationProvider>\r\n);\r\n\r\nexport default Home;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\n//import App from './App';\r\nimport Home from \"./Home\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(<Home />, document.getElementById(\"root\"));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}